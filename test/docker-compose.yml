services:
  asterisk:
    build:
      context: .
      dockerfile: $PWD/test/Dockerfile
      args:
        python: $TRAVIS_PYTHON_VERSION
    volumes:
      - ./support/etc/asterisk/manager.conf:/etc/asterisk/manager.conf
      #- ../:/var/lib/asterisk/agi-bin
      #- ../.coverage:/var/lib/asterisk/agi-bin/.coverage
#    image: andrius/asterisk
          #- ./:/usr/src/app
#      - type: bind
#        source: $PWD
#        target: /var/lib/asterisk/agi-bin
#        bind:
#          propagation: rshared
    networks:
      mynet:
        ipv4_address: 172.25.0.101
    ports:
      - 5038
networks:
  mynet:
    driver: bridge
    ipam:
      config:
      - subnet: 172.25.0.0/24